<div class="container">
  <div class="progress-bar progress-bar--animated">
    <div class="progress-bar__track">
      <div class="progress-bar__indicator progress-bar__indicator--40"></div>
    </div>
  </div>
  <h1>Ravi de vous accueillir, famille <%= @family.name %> ðŸ‘‹</h1>
  <h4>Il est temps maintenant de nous en dire un peu plus sur les enfants de la famille</h4>
  <%= form_with(model: @family, class:"form", url: add_children_family_path, method: "post") do |f| %>
    <%= f.fields_for :children do |child_form| %>
      <div class="form__group enrollment__form__group" data-controller="enrollment-form">
        <div class="form__field">
          <%= f.label :first_name, "PrÃ©nom", class: "form__label" %>
          <%= f.text_field :first_name, class: "form__input" %>
          <% if @family.errors.include?(:first_name) %>
            <p class="form__error"><%= @family.errors[:first_name].first %></p>
          <% end %>
        </div>
        <div class="form__field">
          <%= f.label :age, "Ã‚ge", class: "form__label" %>
          <%= f.number_field :age, class: "form__input" %>
          <% if @family.errors.include?(:age) %>
            <p class="form__error"><%= @family.errors[:age].first %></p>
          <% end %>
        </div>
        <div class="form__checkbox-field">
          <%= child_form.label :neuroatypical, "Neuroatypie ?", class: "form__label" %>
          <%= child_form.check_box :neuroatypical, class: "form__checkbox",
    data: { action: "change->enrollment-form#toggleNeuroType" } %>
        </div>
        <div class="form__field form__slider-field">
          <%= child_form.label :autonomy_level, "Niveau d'autonomie", class: "form__label" %>
          <div class="form__slider-container">
            <%= child_form.range_field :autonomy_level, 
        min: 1,
        max: 5,
        step: 1,
        class: "form__slider",
        data: { 
          action: "input->enrollment-form#updateSliderValue",
          enrollment_form_target: "autonomySlider" 
        } 
    %>
            <div class="form__slider-value" data-enrollment-form-target="autonomyValue">3</div>
            <div class="form__slider-labels">
              <span class="form__slider-label">Faible autonomie</span>
              <span class="form__slider-label">Forte autonomie</span>
            </div>
          </div>
        </div>
        <div data-enrollment-form-target="neuroTypeField" class="form__field hidden">
          <%= child_form.label :neuroatypical_type, "Type de neuroatypie", class: "form__label" %>
          <%= child_form.select :neuroatypical_type, 
    ["TSA", "TDA/H", "DYS", "Autre"], 
    { prompt: "SÃ©lectionner" }, 
    class: "form__select" %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="form__end">
    <%= f.submit "Etape suivante", class: "form__button" %>
  </div>
<% end %>
</div>